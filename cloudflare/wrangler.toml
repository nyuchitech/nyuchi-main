name = "nyuchi_api_dev"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

[env.production]
name = "nyuchi_api"
routes = [
  { pattern = "api.nyuchi.com", zone_name = "nyuchi.com" }
]

[env.development]
name = "nyuchi_api_dev"

# Environment variables (use wrangler secret for sensitive values)
# wrangler secret put SUPABASE_URL
# wrangler secret put SUPABASE_ANON_KEY
# wrangler secret put SUPABASE_SERVICE_ROLE_KEY
# wrangler secret put STRIPE_SECRET_KEY
# wrangler secret put STRIPE_WEBHOOK_SECRET
# wrangler secret put CLOUDFLARE_AI_GATEWAY_ENDPOINT

[vars]
ENVIRONMENT = "production"

# KV Namespaces for caching
# Create with: wrangler kv:namespace create "nyuchi_api_kv_cache"
[[kv_namespaces]]
binding = "CACHE"
id = "your-kv-namespace-id"

# R2 Buckets for file uploads
# Create with: wrangler r2 bucket create nyuchi_api_r2_uploads
[[r2_buckets]]
binding = "UPLOADS"
bucket_name = "nyuchi_api_r2_uploads"

# AI Gateway binding
[ai]
binding = "AI"
