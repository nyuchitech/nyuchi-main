# Nyuchi Platform Help Scout Integration
# Customer support & helpdesk integration

name = "nyuchi-platform-helpscout"
main = "src/index.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]
account_id = "125a2dfbc21f76a25c980609609e8218"

# ============================================
# Production Environment
# ============================================
[env.production]
name = "nyuchi-platform-helpscout"
routes = [
  { pattern = "support.nyuchi.com/*", zone_name = "nyuchi.com" }
]

[env.production.vars]
ENVIRONMENT = "production"
HELPSCOUT_API_BASE = "https://api.helpscout.net/v2"

# KV for token caching
[[env.production.kv_namespaces]]
binding = "CACHE"
id = "cc4d7dd5c17144fb90b1109ba8726ad3"

# Queue for async operations
[[env.production.queues.producers]]
queue = "nyuchi-notifications-queue"
binding = "NOTIFICATIONS_QUEUE"

# Observability
[env.production.observability]
[env.production.observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true

# ============================================
# Development defaults
# ============================================
[vars]
ENVIRONMENT = "development"
HELPSCOUT_API_BASE = "https://api.helpscout.net/v2"

[[kv_namespaces]]
binding = "CACHE"
id = "cc4d7dd5c17144fb90b1109ba8726ad3"

[[queues.producers]]
queue = "nyuchi-notifications-queue"
binding = "NOTIFICATIONS_QUEUE"
